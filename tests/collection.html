<!DOCTYPE HTML><html><head>        <meta charset="UTF-8" />    <title>QUnit - backstab/collection.js</title>		<link href="../css/qunit-1.15.0.css" rel="stylesheet" type="text/css" />	<link href="../css/style.css" rel="stylesheet" type="text/css" />		<script src="../dependencies/jquery-1.11.1.min.js" type="text/javascript"></script>	<script src="../dependencies/underscore-1.7.0.min.js" type="text/javascript"></script>	<script src="../dependencies/backbone-1.1.2.min.js" type="text/javascript"></script>		<script src="../dependencies/string_format.js" type="text/javascript"></script>	<script src="../dependencies/state-machine.js" type="text/javascript"></script>		<script src="../backstab/underscore.js" type="text/javascript"></script>	<script src="../backstab/core.js" type="text/javascript"></script>		<script src="../backstab/model.js" type="text/javascript"></script>	<script src="../backstab/collection.js" type="text/javascript"></script>	</head><body><p><a href="index.html">Main Menu</a></p><div id="qunit"></div><div id="qunit-fixture"></div><div class="hide">		<div id="test_div">Test Div</div>	</div><script src="../dependencies/qunit-1.15.0.js" type="text/javascript"></script><script src="funcs.js" type="text/javascript"></script><script type="text/javascript">var sThingFruitData = 'Thing fruit data';var oFruits = new Backstab.Collection( [	{ num: 101, name: 'Apple', taste: 'Sour' },	{ num: 102, name: 'Banana', taste: 'Sweet' },	{ num: 103, name: 'Grapes', taste: 'Bitter' }], {	data: {		fruit: sThingFruitData	}} );/* ---------------------------------------------------------------------------------------------- */var sThingDataValue = 'The thing data value...';var Thing = Backstab.Model.extend( {		defaults: {		num: 101,		title: 'Some Title',		date: '10-10-1988'	},		doThing: function() {		return 'thing:%s'.printf( this.get( 'slug' ) );	}	} );var Things = Backstab.Collection.extend( {	model: Thing,	data: {		thingData: sThingDataValue	}} );// 3var oThings = new Things( [	{}, { num: 266, title: 'Thing Two', date: '10-09-2014' }, {}] );var sThingFooData = 'This is foo data...';var oThing1 = new Thing();var oThing2 = new Thing( { num: 301, title: 'Three Three', date: '03-03-2003' } );// 4var oThings2 = new Things( [ oThing1, oThing2, {}, {} ], {	data: {		foo: sThingFooData	}} );// oThings2 loses 1, becomes 3// oThings gains 1, becomes 4oThings2.transfer( oThings2.at( 3 ), oThings );// overloaded use of transfer()var oThings3 = new Things( [	{ 'num': 1, 'title': 'Apple', 'date': '1999-03-12' },	{ 'num': 2, 'title': 'Banana', 'date': '1999-04-12' },	{ 'num': 3, 'title': 'Pear', 'date': '1999-05-12' }] );var oTransThings3 = new Things();// transfer model of oThings3.at( 1 ) to oTransThings3oThings3.transfer( 1, oTransThings3 );var oThings4 = new Things( [	{ 'num': 1, 'title': 'Apple', 'date': '1999-03-12' },	{ 'num': 2, 'title': 'Banana', 'date': '1999-04-12' },	{ 'num': 3, 'title': 'Pear', 'date': '1999-05-12' },	{ 'num': 4, 'title': 'Mango', 'date': '1999-05-12' },	{ 'num': 5, 'title': 'Kiwi', 'date': '1999-06-12' }] );var oTransThings4 = new Things();// transfer model of oThings4.at( 1 ) to oTransThings4oThings4.transfer( { 'date': '1999-05-12' }, oTransThings4 );var oThings5 = new Things( [	{ 'num': 1, 'title': 'Apple', 'date': '1999-03-12' },	{ 'num': 2, 'title': 'Banana', 'date': '1999-04-12' },	{ 'num': 3, 'title': 'Pear', 'date': '1999-05-12' }] );var oTransThings5 = new Things();// transfer all models of oThings5 to oTransThings5oThings5.transfer( oTransThings5 );//// destroyEach()var oThings6 = new Things( [	{ 'name': 'foo' },	{ 'name': 'bar' },	{ 'name': 'baz' },] );var iThings6BeforeLen = oThings6.length;oThings6.destroyEach();//// batchEdit()var oThings7 = new Things( [	{ 'fmid': 15, 'idx': 1, 'slug': 'domino', 'name': "Domino's", 'type': 'pizza' },	{ 'fmid': 15, 'idx': 2, 'slug': 'burger_king', 'name': 'Burger King', 'type': 'burger' },	{ 'fmid': 15, 'idx': 3, 'slug': 'jack_astor', 'name': "Jack Astor's", 'type': 'chain' },	{ 'fmid': 15, 'idx': 4, 'slug': 'taco_bell', 'name': 'Taco Bell', 'type': 'tex-mex' },	{ 'fmid': 15, 'idx': 5, 'slug': 'mcdonald', 'name': 'McDonalds', 'type': 'burger' },	{ 'fmid': 15, 'idx': 6, 'slug': 'subway', 'name': 'Subway', 'type': 'subs' },	{ 'fmid': 15, 'idx': 7, 'slug': 'kelsey', 'name': "Kelsey's", 'type': 'chain' }] );var oEditThings7 = new Backstab.Collection( [	{ 'orig_fmid': 15, 'orig_idx': 4, 'slug': 'taco_bell_kfc', 'name': 'Taco Bell and KFC' },	{ 'orig_fmid': 15, 'orig_idx': 7, 'slug': 'kelsey', 'name': "Kelsey's" },	{ 'orig_fmid': 15, 'orig_idx': 1, 'slug': 'domino', 'name': "Domino's Pizza" },	{ 'orig_fmid': 15, 'orig_idx': 2, 'slug': 'burger_king', 'name': 'Burger King' },	{ 'orig_fmid': null, 'orig_idx': null, 'slug': 'wendy', 'name': "Wendy's" },	{ 'orig_fmid': null, 'orig_idx': null, 'slug': 'island_foods', 'name': 'Island Foods' }] );var aNewThings7 = oThings7.batchEdit(	oEditThings7,	function() { return {		'fmid': 15,		'idx': this.get( 'orig_idx' )	}; },	function() { return {		'slug': this.get( 'slug' ),		'name': this.get( 'name' )	}; });/* ---------------------------------------------------------------------------------------------- */test( 'new Backstab.Collection()', function() {	expect( 3 );		var vals1 = { _exp: 3 };	expected(		oFruits.length, vals1,		'oFruits.length should be {{_exp}}'	);		var vals2 = { _exp: 'Banana' };	expected(		oFruits.at( 1 ).get( 'name' ), vals2,		"oFruits.at( 1 ).get( 'name' ) should be {{_exp}}"	);		var vals3 = { _exp: 103 };	expected(		oFruits.at( 2 ).get( 'num' ), vals3,		"oFruits.at( 2 ).get( 'num' ) should be {{_exp}}"	);	} );test( 'Backstab.Collection.extend', function() {		expect( 4 );		var vals1 = { _exp: 101 };	expected(		oThings.at( 0 ).get( 'num' ), vals1,		"oThings.at( 0 ).get( 'num' ) should be {{_exp}}"	);		var vals2 = { _exp: 101 };	expected(		oThings.at( 2 ).get( 'num' ), vals2,		"oThings.at( 2 ).get( 'num' ) should be {{_exp}}"	);		var vals3 = { _exp: 301 };	expected(		oThings2.at( 1 ).get( 'num' ), vals3,		"oThings2.at( 1 ).get( 'num' ) should be {{_exp}}"	);		var vals4 = { _exp: 'Some Title' };	expected(		oThings2.at( 2 ).get( 'title' ), vals4,		"oThings2.at( 2 ).get( 'title' ) should be {{_exp}}"	);		} );test( 'oCollection.data', function() {		expect( 3 );		var vals1 = { _exp: sThingFruitData };	expected(		oFruits.data.fruit, vals1,		"oFruits.data.fruit should be {{_exp}}"	);		var vals2 = { _exp: sThingDataValue };	expected(		oThings.data.thingData, vals2,		"oThings.data.thingData should be {{_exp}}"	);		var vals3 = { _exp: sThingFooData };	expected(		oThings2.data.foo, vals3,		"oThings2.data.foo should be {{_exp}}"	);} );test( 'oCollection.transfer()', function() {		expect( 10 );		var vals1 = { _exp: 4 };	expected(		oThings.length, vals1,		"oThings.length should be {{_exp}}"	);		var vals2 = { _exp: 3 };	expected(		oThings2.length, vals2,		"oThings2.length should be {{_exp}}"	);		var vals3 = { _exp: 2 };	expected(		oThings3.length, vals3,		"oThings3.length should be {{_exp}}"	);		var vals4 = { _exp: 1 };	expected(		oTransThings3.length, vals4,		"oTransThings3.length should be {{_exp}}"	);		var vals5 = { _exp: 'Banana' };	expected(		oTransThings3.at( 0 ).get( 'title' ), vals5,		"oTransThings3.at( 0 ).get( 'title' ) should be {{_exp}}"	);		var vals6 = { _exp: 3 };	expected(		oThings4.length, vals6,		"oThings4.length should be {{_exp}}"	);		var vals7 = { _exp: 2 };	expected(		oTransThings4.length, vals7,		"oTransThings4.length should be {{_exp}}"	);		var vals8 = { _exp: 'Mango' };	expected(		oTransThings4.at( 1 ).get( 'title' ), vals8,		"oTransThings4.at( 1 ).get( 'title' ) should be {{_exp}}"	);		var vals9 = { _exp: 0 };	expected(		oThings5.length, vals9,		"oThings5.length should be {{_exp}}"	);		var vals10 = { _exp: 3 };	expected(		oTransThings5.length, vals10,		"oTransThings5.length should be {{_exp}}"	);		} );test( 'oCollection.destroyEach()', function() {		expect( 2 );		var vals1 = { _exp: 3 };	expected(		iThings6BeforeLen, vals1,		"iThings6BeforeLen should be {{_exp}}"	);		var vals2 = { _exp: 0 };	expected(		oThings6.length, vals2,		"oThings6.length should be {{_exp}}"	);	} );test( 'oCollection.batchEdit()', function() {		expect( 5 );		var vals1 = { _exp: 6 };	expected(		oThings7.length, vals1,		"oThings7.length should be {{_exp}}"	);		var oThing1 = oThings7.at( 0 );		var vals2 = { _exp: 'taco_bell_kfc' };	expected(		oThing1.get( 'slug' ), vals2,		"oThing1.get( 'slug' ) should be {{_exp}}"	);		var oThing2 = oThings7.at( 3 );		var vals3 = { _exp: 'burger_king' };	expected(		oThing2.get( 'slug' ), vals3,		"oThing2.get( 'slug' ) should be {{_exp}}"	);		var oThing3 = oThings7.at( 4 );		var vals4 = { _exp: null };	expected(		oThing3.get( 'orig_idx' ), vals4,		"oThing3.get( 'orig_idx' ) should be {{_exp}}"	);		var vals5 = { _exp: 2 };	expected(		aNewThings7.length, vals5,		"aNewThings7.length should be {{_exp}}"	);	} );</script></body></html>