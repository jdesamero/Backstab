<!DOCTYPE HTML>
<html>
<head>
    
    <meta charset="UTF-8" />
    <title>Backstab - Bindings</title>
	
	<link href="../css/style.css" type="text/css" rel="stylesheet" media="screen" />
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
	<script src="http://documentcloud.github.com/underscore/underscore-min.js" type="text/javascript"></script>
	<script src="http://documentcloud.github.com/backbone/backbone-min.js" type="text/javascript"></script>
	
	<script src="../etc/jquery.tmpl.js" type="text/javascript"></script>
		
	<script src="../backstab/underscore.js" type="text/javascript"></script>
	<script src="../backstab/core.js" type="text/javascript"></script>
	
	<script src="../backstab/view.js" type="text/javascript"></script>
	<script src="../backstab/foo.js" type="text/javascript"></script>
	
	
	<script type="text/javascript">
		
		//
		Backstab.latchToBackbone( 'View', 'Foo' );
		
		var Foo = Backbone.Foo.extend( {
			initialize: function( opts ) {
				this.options = opts;
			},
			performBar: function( baz, quux ) {
				// do stuff
				this.trigger( 'bar', this, baz, quux );
			}
		} );
		
		var oFoo = {
			a: new Foo( { bar: 'Hay' } ),
			b: new Foo( { bar: 'Bee' } ),
			c: new Foo( { bar: 'Sea' } )
		};
		
		// control buttons
		var ControlsView = Backbone.View.extend( {
			
			events: {
				
				'click #ctl_1, #ctl_2, #ctl_3': [ 'sayMyName', 'Fruit' ],
				'click #ctl_4, #ctl_5, #ctl_6': [ 'sayMyName', 'Vegetable' ],
				'click #ctl_7, #ctl_8': [ 'sayMyName', 'Meat' ],
				
				'foo.{ a:bar; b:bar; c:bar }': 'doBar'
			},
			
			foo: oFoo,
			
			sayMyName: function( e, msg ) {
				_.showMe( $( e.target ).html() + ' is a ' + msg );
				return false;
			},
			
			doBar: function( e, foo, baz, quux ) {
				alert( foo.options.bar + '! ' + baz + ' --- ' + quux + '!!!' );
			}
			
		} );
		
		//
		jQuery( document ).ready( function( $ ) {			
			
			var controls = new ControlsView( { el: $( '#controls' ) } );

			$( '#ctl_a' ).click( function() {
				oFoo.a.foo( 'Yes' );
				return false;
			} );
			
			$( '#ctl_b' ).click( function() {
				oFoo.a.performBar( 'A Horse', 'Of Course' );
				return false;
			} );
			
		} );
		
	</script>


</head>

<body>

<h1>Backstab - Bindings</h1>

<hr />

<div id="controls">
	
	<a href="#" id="ctl_1">Apple</a> | 
	<a href="#" id="ctl_2">Banana</a> | 
	<a href="#" id="ctl_3">Orange</a>
	
	<br />
	
	<a href="#" id="ctl_4">Cabbage</a> | 
	<a href="#" id="ctl_5">Broccoli</a> | 
	<a href="#" id="ctl_6">Turnip</a>

	<br />
	
	<a href="#" id="ctl_7">Steak</a> | 
	<a href="#" id="ctl_8">Bacon</a>
	
</div>

<hr />

<a href="#" id="ctl_a">Trigger Foo</a> | 
<a href="#" id="ctl_b">Perform Bar</a>

</body>

</html>
